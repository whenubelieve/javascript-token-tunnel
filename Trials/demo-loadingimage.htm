<!doctype html>
<html>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.js">
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
        
            $('#btnLoad').click(function(){
                // when the DOM is ready
                $(function(){
                    var img = new Image();
                    
                    // wrap our new image in jQuery, then:
                    $(img).load(function(){// once the image has loaded, execute this code
                        // set the image hidden by default    
                        $(this).hide();
                        
                        // with the holding div #loader, apply:
                        $('#loader').delay(3000).removeClass('loading') // remove the loading class (so no background spinner), 
                        // then insert our image
                        .append(this);
                        
                        // fade our image in to create a nice effect
                        $(this).fadeIn();
                        
                    }) // if there was an error loading the image, react accordingly
        .error(function(){
                        alert('could not load the image!');// notify the user that the image could not be loaded
                    }) //.attr('src','http://www.ajaxload.info/cache/FF/FF/FF/00/00/00/19-0.gif')
                    //delaying this step so that we can see the loading image
                    
                    .delay(3000) // *finally*, set the src attribute of the new image to our image      
                    //.attr('src', 'http://www.sanbaldo.com/wordpress/wp-content/bigrotation2.gif')
                    .attr('src', 'http://wonko.via.cornell.edu/bigimgs/test1/foo.0.0.0.0.jpeg');
                });
            });
        });
    </script>
    <head>
        <style type="text/css">
            a.test {
                font-weight: bold;
            }
            
            DIV#loader {
                border: 1px solid #ccc;
                width: 500px;
                height: 500px;
            }
            
            /**
             * While we're having the loading class set.
             * Removing it, will remove the loading message
             */
            DIV#loader.loading {
                /*background-image: url('http://www.sanbaldo.com/wordpress/wp-content/bigrotation2.gif');*/
                /*background-image: url('http://www.ajaxload.info/cache/FF/FF/FF/00/00/00/19-0.gif');*/
                background-image: url('testimages/19-0.gif');
            }
        </style>
        <script type="text/javascript">
        </script>
    </head>
    <body>
        <button id="btnLoad">
            Load Content
        </button>
        <div id="content">
            Please click "Load Content" button to load content.
        </div>
        <div id="loader" class="loading">
        </div>
    </body>
</html>
