<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Trial</title>
<script type="text/javascript">
patchSize=256;
zoomlevel=0;
imageSize= Math.pow(2, zoomlevel)*patchSize;
var height=0;
var width=0;
function change() //change happens to viewing window and grid patches.
{ 
document.getElementById('patchGrid').reset();
document.getElementById("VW").style.height=document.getElementById("text1").value + "px";
document.getElementById("VW").style.width=document.getElementById("text2").value + "px";
 height=document.getElementById("text1").value;
 width=document.getElementById("text2").value;
 document.getElementById("patchGrid").style.height=Math.ceil(height/256)*256;
 document.getElementById("patchGrid").style.width=Math.ceil(width/256)*256;
 var left=0;
 var top=0;
  document.getElementById("patchGrid").style.clip="rect(" + top + "px " + width + "px " + height + "px " + left + "px)";
}

var row=0;
var col=0;
function gridFormation()
{
//     number = Math.pow(4, zoomlevel);
//     row = col = Math.pow(2, zoomlevel);
 row=Math.ceil(height/patchSize);
 col=Math.ceil(width/patchSize);
for (i=1;i<=row;i++)
{ 
for (j=1;j<=col;j++)
{
	
dummy=document.createElement("img");
dummy.id="img"+i+j;
dummy.height=patchSize;
dummy.width=patchSize;
document.getElementById("patchGrid").appendChild(dummy);
}
}
}

function loadPatch()
{
  zoomlevel=document.getElementById("text3").value;
  row=Math.min(Math.pow(2, zoomlevel),row);
  col=Math.min(Math.pow(2, zoomlevel),col);

for (i=1;i<=row;i++)
{ 
for (j=1;j<=col;j++)
{
document.getElementById("img"+i+j).src="http://wonko.via.cornell.edu/bigimgs/test1/foo."+ zoomlevel + "." +( j -1)+ "." + (i-1) + ".0.jpeg";}

}

}


</script>


</head>

<body >
<div  id="patchGrid" style="border: thin #000000 none; position: absolute; width: 512px; height: 512px; z-index: 1; left: 200px; top: 150px">
</div>

<form method="post">
	<input id="text1"name="Height" type="text" value="73" onchange="change()"/>
	<input id="text2" name="Width" type="text"  onchange="change();gridFormation()" value="73"/>
	<input  id="text3" name="Zoomlevel" type="text" onchange="loadPatch()" value="0"/></form>

<div  id="VW" style="border: thin #FF00FF solid; position: absolute; width: 50px; height: 50px; z-index: 1; left: 200px; top: 150px" id="layer1">
</div>

</body>

</html>
